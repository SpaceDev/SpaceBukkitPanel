jQuery.fn.liveSearch=function(a){var b=jQuery.extend({url:"/search-results.php?q=",id:"livesearch",duration:400,typeDelay:200,loadingClass:"loading",onSlideUp:function(){},uptadePosition:!1},a),c=jQuery("#"+b.id);return c.length||(c=jQuery('<div id="'+b.id+'"></div>').appendTo(document.body).hide(),jQuery(document.body).click(function(a){var d=jQuery(a.target);d.is("#"+b.id)||d.parents("#"+b.id).length||d.is("input")||c.hide()})),this.each(function(){var a=jQuery(this).attr("autocomplete","off"),d=parseInt(c.css("paddingLeft"),10)+parseInt(c.css("paddingRight"),10)+parseInt(c.css("borderLeftWidth"),10)+parseInt(c.css("borderRightWidth"),10),e=function(){var b=a.offset(),e={left:b.left,top:b.top,width:a.outerWidth(),height:a.outerHeight()};e.topPos=e.top+e.height,e.totalWidth=e.width-d,c.css({position:"absolute",left:e.left+"px",top:e.topPos+"px",width:e.totalWidth+"px"})},f=function(){e(),$(window).unbind("resize",e),$(window).bind("resize",e),c.fadeIn(200)},g=function(){c.hide()};a.focus(function(){""!==this.value&&(""==c.html()?(this.lastValue="",a.keyup()):setTimeout(f,1))}).keyup(function(){if(this.value!=this.lastValue){a.addClass(b.loadingClass);var d=this.value;this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){jQuery.get(b.url+d,function(e){a.removeClass(b.loadingClass),e.length&&d.length?(c.html(e),f()):g()})},b.typeDelay),this.lastValue=this.value}})})};